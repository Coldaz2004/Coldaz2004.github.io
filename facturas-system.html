<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FACTURAS - Sistema de Facturaci√≥n Electr√≥nica</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 1200px;
            margin: 20px;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .subtitle {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .main-content {
            padding: 40px;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-control {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .navigation {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-bottom: none;
            display: none;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .navigation.active {
            display: block;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }

        .nav-buttons .btn {
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(0);
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            font-size: 14px;
        }

        .nav-buttons .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .nav-buttons .btn:hover::before {
            left: 100%;
        }

        .nav-buttons .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .nav-buttons .btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* Estilos espec√≠ficos para cada bot√≥n */
        .nav-buttons .btn-primary {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border-color: rgba(255, 255, 255, 0.4);
            animation: pulseGlow 2s infinite;
        }

        .nav-buttons .btn-secondary {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            border-color: rgba(255, 255, 255, 0.3);
        }

        .nav-buttons .btn-secondary:nth-child(2) {
            background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
        }

        .nav-buttons .btn-secondary:nth-child(3) {
            background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
        }

        .nav-buttons .btn-secondary:nth-child(4) {
            background: linear-gradient(135deg, #607D8B 0%, #455A64 100%);
        }

        .nav-buttons .btn-danger {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
            border-color: rgba(255, 255, 255, 0.4);
            margin-left: auto;
            position: relative;
        }

        .nav-buttons .btn-danger::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .nav-buttons .btn-danger:hover::after {
            width: 300px;
            height: 300px;
        }

        /* Animaciones */
        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
            }
            50% {
                box-shadow: 0 6px 20px rgba(76, 175, 80, 0.7), 0 0 20px rgba(76, 175, 80, 0.3);
            }
        }

        @keyframes slideInNav {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .nav-buttons .btn {
            animation: slideInNav 0.6s ease-out forwards;
        }

        .nav-buttons .btn:nth-child(1) { animation-delay: 0.1s; }
        .nav-buttons .btn:nth-child(2) { animation-delay: 0.2s; }
        .nav-buttons .btn:nth-child(3) { animation-delay: 0.3s; }
        .nav-buttons .btn:nth-child(4) { animation-delay: 0.4s; }
        .nav-buttons .btn:nth-child(5) { animation-delay: 0.5s; }

        /* Efecto de ondas al hacer clic */
        .nav-buttons .btn {
            position: relative;
            overflow: hidden;
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            animation: rippleEffect 0.6s linear;
            pointer-events: none;
        }

        @keyframes rippleEffect {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid #e1e5e9;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .invoice-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .invoice-items {
            margin-top: 30px;
        }

        .item-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .invoice-total {
            text-align: right;
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .file-upload {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            background: rgba(102, 126, 234, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .invoice-list {
            margin-top: 30px;
        }

        .invoice-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .status.enviado {
            background: #d4edda;
            color: #155724;
        }

        .status.pendiente {
            background: #fff3cd;
            color: #856404;
        }

        .status.rechazado {
            background: #f8d7da;
            color: #721c24;
        }

        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid transparent;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .card {
            transition: all 0.3s ease;
        }
        
        .invoice-item:hover {
            background-color: #f8f9fa;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        @media (max-width: 768px) {
            .invoice-form {
                grid-template-columns: 1fr;
            }
            
            .item-row {
                grid-template-columns: 1fr;
            }
            
            .nav-buttons {
                flex-direction: column;
            }
            
            .invoice-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        /* Estilos para la Landing Page */
        .landing-page {
            padding: 0;
            margin: -40px;
        }

        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><radialGradient id="a" cx="50%" cy="0%"><stop offset="0%" stop-color="rgba(255,255,255,0.1)"/><stop offset="100%" stop-color="rgba(255,255,255,0)"/></radialGradient></defs><rect fill="url(%23a)" width="100%" height="100%"/></svg>');
            opacity: 0.5;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            margin-bottom: 40px;
            opacity: 0.9;
            line-height: 1.6;
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-large {
            padding: 18px 40px;
            font-size: 18px;
            border-radius: 12px;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #667eea;
            color: #667eea;
        }

        .btn-outline:hover {
            background: #667eea;
            color: white;
        }

        .section-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 40px;
        }

        .about-section, .services-section, .pricing-section, .contact-section {
            padding: 80px 0;
        }

        .about-section {
            background: #f8f9fa;
        }

        .section-title {
            font-size: 2.5rem;
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 50px;
        }

        .about-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .about-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
        }

        .about-features {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .feature {
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .feature-icon {
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            flex-shrink: 0;
        }

        .feature h4 {
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .feature p {
            color: #666;
            margin: 0;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .service-card {
            background: white;
            padding: 40px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .service-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .service-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .service-card p {
            color: #666;
            line-height: 1.6;
        }

        .pricing-section {
            background: #f8f9fa;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .pricing-card {
            background: white;
            border-radius: 15px;
            padding: 40px 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            transition: transform 0.3s ease;
        }

        .pricing-card:hover {
            transform: translateY(-5px);
        }

        .pricing-card.featured {
            border: 3px solid #667eea;
            transform: scale(1.05);
        }

        .popular-badge {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 25px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .plan-header {
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 30px;
            margin-bottom: 30px;
        }

        .plan-header h3 {
            color: #2c3e50;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .price {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .price span {
            font-size: 1rem;
            color: #666;
            font-weight: normal;
        }

        .plan-features ul {
            list-style: none;
            padding: 0;
        }

        .plan-features li {
            padding: 10px 0;
            color: #555;
            border-bottom: 1px solid #f0f0f0;
        }

        .plan-features li:last-child {
            border-bottom: none;
        }

        .contact-section {
            background: #2c3e50;
            color: white;
        }

        .contact-section .section-title {
            color: white;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            margin-top: 50px;
        }

        .contact-info h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #667eea;
        }

        .contact-info p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
        }

        .contact-icon {
            font-size: 2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            flex-shrink: 0;
        }

        .contact-details h4 {
            margin-bottom: 5px;
            color: #667eea;
        }

        .contact-details a {
            color: white;
            text-decoration: none;
            font-size: 1.1rem;
        }

        .contact-details a:hover {
            color: #667eea;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .contact-form {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .contact-form h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .contact-form p {
            margin-bottom: 25px;
            opacity: 0.9;
        }

        .contact-form .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }

        .contact-form .form-control::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .contact-form .form-control:focus {
            background: rgba(255, 255, 255, 0.2);
            border-color: #667eea;
        }

        .contact-form textarea {
            resize: vertical;
            min-height: 100px;
        }

        .login-access {
            text-align: center;
        }

        .login-access p {
            margin-bottom: 15px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Responsive Design para Landing Page */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.1rem;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }

            .about-grid, .contact-grid {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .services-grid, .pricing-grid {
                grid-template-columns: 1fr;
            }

            .section-content {
                padding: 0 20px;
            }

            .hero-section {
                padding: 60px 20px;
            }

            .about-section, .services-section, .pricing-section, .contact-section {
                padding: 60px 0;
            }

            .pricing-card.featured {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">‚ö° FACTURAS</div>
            <div class="subtitle">Sistema de Facturaci√≥n Electr√≥nica - DESARROLLO DE SOFTWARE SAS</div>
        </div>

        <div class="navigation" id="navigation">
            <div class="nav-buttons">
                <div class="nav-group main-actions">
                    <button class="btn btn-primary" onclick="showScreen('dashboard')">üè† Inicio</button>
                    <button class="btn btn-secondary create-btn" onclick="showScreen('create-invoice')">üìù Crear Factura</button>
                    <button class="btn btn-secondary upload-btn" onclick="showScreen('upload-invoice')">üì§ Subir Factura</button>
                    <button class="btn btn-secondary list-btn" onclick="showScreen('invoice-list')">üìã Lista de Facturas</button>
                </div>
                <div class="nav-group user-actions">
                    <button class="btn btn-danger" onclick="logout()">üö™ Cerrar Sesi√≥n</button>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- Pantalla Principal / Landing Page -->
            <div id="home-screen" class="screen active">
                <div class="landing-page">
                    <!-- Hero Section -->
                    <section class="hero-section">
                        <div class="hero-content">
                            <h1 class="hero-title">Facturaci√≥n Electr√≥nica Simplificada</h1>
                            <p class="hero-subtitle">Transforma tu negocio con nuestro sistema integral de facturaci√≥n electr√≥nica. Cumple con la DIAN de manera f√°cil y eficiente.</p>
                            <div class="hero-buttons">
                                <button class="btn btn-primary btn-large" onclick="showScreen('login')">Iniciar Sesi√≥n</button>
                                <button class="btn btn-secondary btn-large" onclick="scrollToSection('about')">Conocer M√°s</button>
                            </div>
                        </div>
                    </section>

                    <!-- About Section -->
                    <section id="about" class="about-section">
                        <div class="section-content">
                            <h2 class="section-title">¬øQui√©nes Somos?</h2>
                            <div class="about-grid">
                                <div class="about-text">
                                    <p><strong>DESARROLLO DE SOFTWARE SAS</strong> es una empresa especializada en soluciones tecnol√≥gicas para empresas de todos los tama√±os. Con m√°s de 5 a√±os de experiencia en el mercado, nos hemos consolidado como l√≠deres en el desarrollo de sistemas de facturaci√≥n electr√≥nica.</p>
                                    <p>Nuestro compromiso es facilitar la transici√≥n digital de las empresas colombianas, ofreciendo herramientas innovadoras que simplifican los procesos administrativos y garantizan el cumplimiento normativo con la DIAN.</p>
                                </div>
                                <div class="about-features">
                                    <div class="feature">
                                        <div class="feature-icon">‚ö°</div>
                                        <h4>R√°pido y Eficiente</h4>
                                        <p>Proceso de facturaci√≥n optimizado que reduce tiempos y aumenta la productividad.</p>
                                    </div>
                                    <div class="feature">
                                        <div class="feature-icon">üõ°Ô∏è</div>
                                        <h4>Seguro y Confiable</h4>
                                        <p>M√°xima seguridad en el manejo de datos con respaldo y encriptaci√≥n avanzada.</p>
                                    </div>
                                    <div class="feature">
                                        <div class="feature-icon">üìä</div>
                                        <h4>Reportes Detallados</h4>
                                        <p>An√°lisis completos de tu facturaci√≥n con estad√≠sticas en tiempo real.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Services Section -->
                    <section class="services-section">
                        <div class="section-content">
                            <h2 class="section-title">¬øQu√© Hacemos?</h2>
                            <div class="services-grid">
                                <div class="service-card">
                                    <div class="service-icon">üìÑ</div>
                                    <h3>Facturaci√≥n Electr√≥nica</h3>
                                    <p>Sistema completo de creaci√≥n, gesti√≥n y env√≠o de facturas electr√≥nicas cumpliendo con todos los requisitos de la DIAN.</p>
                                </div>
                                <div class="service-card">
                                    <div class="service-icon">üì§</div>
                                    <h3>Integraci√≥n DIAN</h3>
                                    <p>Conexi√≥n directa con los sistemas de la DIAN para env√≠o autom√°tico y validaci√≥n de facturas en tiempo real.</p>
                                </div>
                                <div class="service-card">
                                    <div class="service-icon">üì±</div>
                                    <h3>Plataforma Web</h3>
                                    <p>Acceso desde cualquier dispositivo con nuestra plataforma web responsive, disponible 24/7.</p>
                                </div>
                                <div class="service-card">
                                    <div class="service-icon">üîß</div>
                                    <h3>Soporte T√©cnico</h3>
                                    <p>Acompa√±amiento personalizado y soporte t√©cnico especializado para resolver cualquier inquietud.</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Pricing Section -->
                    <section id="pricing" class="pricing-section">
                        <div class="section-content">
                            <h2 class="section-title">Planes y Precios</h2>
                            <p class="section-subtitle">Elige el plan que mejor se adapte a las necesidades de tu empresa</p>
                            <div class="pricing-grid">
                                <div class="pricing-card">
                                    <div class="plan-header">
                                        <h3>Plan B√°sico</h3>
                                        <div class="price">$50,000<span>/mes</span></div>
                                    </div>
                                    <div class="plan-features">
                                        <ul>
                                            <li>‚úì Hasta 100 facturas/mes</li>
                                            <li>‚úì Env√≠o autom√°tico a DIAN</li>
                                            <li>‚úì Reportes b√°sicos</li>
                                            <li>‚úì Soporte por email</li>
                                            <li>‚úì 1 usuario</li>
                                        </ul>
                                    </div>
                                    <button class="btn btn-outline">Elegir Plan</button>
                                </div>
                                
                                <div class="pricing-card featured">
                                    <div class="popular-badge">M√°s Popular</div>
                                    <div class="plan-header">
                                        <h3>Plan Profesional</h3>
                                        <div class="price">$120,000<span>/mes</span></div>
                                    </div>
                                    <div class="plan-features">
                                        <ul>
                                            <li>‚úì Hasta 500 facturas/mes</li>
                                            <li>‚úì Env√≠o autom√°tico a DIAN</li>
                                            <li>‚úì Reportes avanzados</li>
                                            <li>‚úì Soporte prioritario</li>
                                            <li>‚úì Hasta 5 usuarios</li>
                                            <li>‚úì API de integraci√≥n</li>
                                            <li>‚úì Personalizaci√≥n b√°sica</li>
                                        </ul>
                                    </div>
                                    <button class="btn btn-primary">Elegir Plan</button>
                                </div>
                                
                                <div class="pricing-card">
                                    <div class="plan-header">
                                        <h3>Plan Empresarial</h3>
                                        <div class="price">$300,000<span>/mes</span></div>
                                    </div>
                                    <div class="plan-features">
                                        <ul>
                                            <li>‚úì Facturas ilimitadas</li>
                                            <li>‚úì Env√≠o autom√°tico a DIAN</li>
                                            <li>‚úì Reportes personalizados</li>
                                            <li>‚úì Soporte 24/7</li>
                                            <li>‚úì Usuarios ilimitados</li>
                                            <li>‚úì API completa</li>
                                            <li>‚úì Personalizaci√≥n total</li>
                                            <li>‚úì Consultor dedicado</li>
                                        </ul>
                                    </div>
                                    <button class="btn btn-outline">Contactar Ventas</button>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Contact Section -->
                    <section class="contact-section">
                        <div class="section-content">
                            <h2 class="section-title">Cont√°ctanos</h2>
                            <div class="contact-grid">
                                <div class="contact-info">
                                    <h3>¬øNecesitas ayuda?</h3>
                                    <p>Nuestro equipo est√° listo para apoyarte en la implementaci√≥n y uso de nuestro sistema de facturaci√≥n electr√≥nica.</p>
                                    
                                    <div class="contact-item">
                                        <div class="contact-icon">üìû</div>
                                        <div class="contact-details">
                                            <h4>Tel√©fono</h4>
                                            <a href="tel:+573001234567">+57 300 123 4567</a>
                                        </div>
                                    </div>
                                    
                                    <div class="contact-item">
                                        <div class="contact-icon">üí¨</div>
                                        <div class="contact-details">
                                            <h4>WhatsApp</h4>
                                            <a href="https://wa.me/573001234567" target="_blank">+57 300 123 4567</a>
                                        </div>
                                    </div>
                                    
                                    <div class="contact-item">
                                        <div class="contact-icon">üìò</div>
                                        <div class="contact-details">
                                            <h4>Facebook</h4>
                                            <a href="https://facebook.com/desarrollosoftwaresas" target="_blank">@desarrollosoftwaresas</a>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="contact-form">
                                    <h3>Env√≠anos un Mensaje</h3>
                                    <p>¬øTienes preguntas sobre nuestros servicios? Completa el formulario y te contactaremos pronto.</p>
                                    
                                    <form onsubmit="handleContactForm(event)">
                                        <div class="form-group">
                                            <label for="contact-name">Nombre Completo:</label>
                                            <input type="text" id="contact-name" class="form-control" placeholder="Tu nombre completo" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="contact-email">Email:</label>
                                            <input type="email" id="contact-email" class="form-control" placeholder="tu@email.com" required>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="contact-phone">Tel√©fono:</label>
                                            <input type="tel" id="contact-phone" class="form-control" placeholder="+57 300 123 4567">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="contact-company">Empresa:</label>
                                            <input type="text" id="contact-company" class="form-control" placeholder="Nombre de tu empresa">
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="contact-message">Mensaje:</label>
                                            <textarea id="contact-message" class="form-control" rows="4" placeholder="Cu√©ntanos c√≥mo podemos ayudarte..." required></textarea>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary" style="width: 100%;">Enviar Mensaje</button>
                                    </form>
                                    
                                    <div class="login-access" style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
                                        <p style="text-align: center; margin-bottom: 15px;">¬øYa tienes una cuenta?</p>
                                        <button class="btn btn-secondary" onclick="showScreen('login')" style="width: 100%;">Iniciar Sesi√≥n</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Pantalla de Login -->
            <div id="login-screen" class="screen">
                <div style="max-width: 400px; margin: 0 auto;">
                    <h2 style="text-align: center; margin-bottom: 30px; color: #2c3e50;">Iniciar Sesi√≥n</h2>
                    
                    <!-- Mensaje de error para login -->
                    <div id="login-error" class="alert alert-danger" style="display: none;">
                        <strong>‚ùå Usuario o contrase√±a incorrectos</strong><br>
                        Intente nuevamente
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label for="username">Usuario:</label>
                            <input type="text" id="username" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="password">Contrase√±a:</label>
                            <input type="password" id="password" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <button type="button" class="btn btn-primary" onclick="handleLogin()" style="width: 100%;">Ingresar</button>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-secondary" onclick="showScreen('home')" style="width: 100%; margin-bottom: 15px;">‚Üê Volver al Inicio</button>
                        <a href="#" onclick="showScreen('register')" style="color: #667eea; text-decoration: none;">¬øNo tienes cuenta? Reg√≠strate aqu√≠</a><br>
                        <a href="#" onclick="showScreen('reset-password')" style="color: #dc3545; text-decoration: none; font-size: 0.9rem; margin-top: 10px; display: inline-block;">¬øOlvidaste tu contrase√±a?</a>
                    </div>
                </div>
            </div>

            <!-- Pantalla de Registro -->
            <div id="register-screen" class="screen">
                <div style="max-width: 500px; margin: 0 auto;">
                    <h2 style="text-align: center; margin-bottom: 30px; color: #2c3e50;">Registrar Nueva Cuenta</h2>
                    
                    <!-- Mensaje de √©xito para registro -->
                    <div id="register-success" class="alert alert-success" style="display: none;">
                        <strong>‚úÖ Usuario ha sido registrado exitosamente</strong><br>
                        Ya puedes iniciar sesi√≥n con tus credenciales
                    </div>
                    
                    <!-- Mensaje de error para registro -->
                    <div id="register-error" class="alert alert-danger" style="display: none;">
                        <strong>‚ùå Error en el registro</strong><br>
                        <span id="register-error-message"></span>
                    </div>
                    
                    <div>
                        <div class="form-group">
                            <label for="reg-company">Empresa:</label>
                            <input type="text" id="reg-company" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="reg-nit">NIT:</label>
                            <input type="text" id="reg-nit" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="reg-username">Usuario:</label>
                            <input type="text" id="reg-username" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="reg-email">Email:</label>
                            <input type="email" id="reg-email" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="reg-password">Contrase√±a:</label>
                            <input type="password" id="reg-password" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <button type="button" class="btn btn-primary" onclick="handleRegister()" style="width: 100%;">Registrarse</button>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <a href="#" onclick="showScreen('login')" style="color: #667eea; text-decoration: none;">¬øYa tienes cuenta? Inicia sesi√≥n</a><br>
                        <a href="#" onclick="showScreen('reset-password')" style="color: #dc3545; text-decoration: none; font-size: 0.9rem; margin-top: 10px; display: inline-block;">¬øOlvidaste tu contrase√±a?</a>
                    </div>
                </div>
            </div>

            <!-- Dashboard -->
            <div id="dashboard-screen" class="screen">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <div>
                        <h1 id="company-name-header" style="color: #2c3e50; margin: 0; font-size: 2rem; font-weight: bold;"></h1>
                        <h3 style="color: #667eea; margin: 5px 0 0 0;">Panel de Control</h3>
                    </div>
                    <div style="text-align: right; color: #666;">
                        <p style="margin: 0;"><strong>Usuario:</strong> <span id="current-user-name"></span></p>
                        <p style="margin: 0; font-size: 0.9rem;" id="current-date"></p>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-title">üìä Resumen General</div>
                        <p><strong>Facturas Creadas:</strong> <span id="total-facturas">0</span></p>
                        <p><strong>Enviadas a DIAN:</strong> <span id="enviadas-dian">0</span></p>
                        <p><strong>Pendientes:</strong> <span id="pendientes">0</span></p>
                        <p><strong>Total Facturado:</strong> $<span id="total-facturado">0</span></p>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">‚ö° Acciones R√°pidas</div>
                        <button class="btn btn-primary" onclick="showScreen('create-invoice')" style="width: 100%; margin-bottom: 10px;">Crear Nueva Factura</button>
                        <button class="btn btn-secondary" onclick="showScreen('upload-invoice')" style="width: 100%; margin-bottom: 10px;">Subir Factura</button>
                        <button class="btn btn-success" onclick="sendAllToDian()" style="width: 100%;">Enviar Todo a DIAN</button>
                    </div>
                    
                    <div class="card">
                        <div class="card-title">üìà Estado DIAN</div>
                        <div class="alert alert-success">
                            <strong>‚úì Conexi√≥n Activa</strong><br>
                            Sistema conectado correctamente con la DIAN
                        </div>
                        <button class="btn btn-warning" onclick="testDianConnection()" style="width: 100%;">Probar Conexi√≥n</button>
                    </div>
                </div>
            </div>

            <!-- Crear Factura -->
            <div id="create-invoice-screen" class="screen">
                <h2 style="color: #2c3e50; margin-bottom: 30px;">Crear Nueva Factura</h2>
                
                <form onsubmit="createInvoice(event)">
                    <div class="invoice-form">
                        <div class="form-group">
                            <label for="invoice-number">N√∫mero de Factura:</label>
                            <input type="text" id="invoice-number" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="invoice-date">Fecha:</label>
                            <input type="date" id="invoice-date" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="client-name">Nombre del Cliente:</label>
                            <input type="text" id="client-name" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="client-nit">NIT/CC Cliente:</label>
                            <input type="text" id="client-nit" class="form-control" required>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="client-address">Direcci√≥n del Cliente:</label>
                            <input type="text" id="client-address" class="form-control" required>
                        </div>
                        
                        <div class="form-group full-width">
                            <label for="client-email">Email del Cliente:</label>
                            <input type="email" id="client-email" class="form-control" required placeholder="cliente@ejemplo.com">
                        </div>
                    </div>
                    
                    <div class="invoice-items">
                        <h3 style="color: #2c3e50; margin-bottom: 20px;">Productos/Servicios</h3>
                        <div id="items-container">
                            <div class="item-row">
                                <input type="text" placeholder="Descripci√≥n" class="form-control item-description" required>
                                <input type="number" placeholder="Cantidad" class="form-control item-quantity" min="1" required>
                                <input type="number" placeholder="Valor Unitario" class="form-control item-price" step="0.01" required>
                                <input type="number" placeholder="Total" class="form-control item-total" readonly>
                                <button type="button" class="btn btn-danger" onclick="removeItem(this)">üóëÔ∏è</button>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-secondary" onclick="addItem()">‚ûï Agregar Producto</button>
                        
                        <div class="invoice-total">
                            <div>Subtotal: $<span id="subtotal">0.00</span></div>
                            <div>IVA (19%): $<span id="iva">0.00</span></div>
                            <div style="font-size: 1.5rem; color: #28a745;">Total: $<span id="total">0.00</span></div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; text-align: center;">
                        <button type="submit" class="btn btn-success" style="margin-right: 15px;">üíæ Crear Factura</button>
                        <button type="button" class="btn btn-secondary" onclick="clearForm()">üîÑ Limpiar</button>
                    </div>
                </form>
            </div>

            <!-- Subir Factura -->
            <div id="upload-invoice-screen" class="screen">
                <h2 style="color: #2c3e50; margin-bottom: 30px;">Subir Factura Existente</h2>
                
                <div class="file-upload" onclick="document.getElementById('file-input').click()">
                    <div style="font-size: 3rem; margin-bottom: 20px;">üìÑ</div>
                    <h3>Haz clic para seleccionar archivo</h3>
                    <p>Formatos soportados: PDF, XML, TXT</p>
                    <input type="file" id="file-input" style="display: none;" accept=".pdf,.xml,.txt" onchange="handleFileUpload(event)">
                </div>
                
                <div id="upload-result" style="margin-top: 30px;"></div>
                
                <div style="margin-top: 30px; text-align: center;">
                    <button class="btn btn-primary" onclick="processUploadedFile()">üì§ Procesar y Enviar a DIAN</button>
                </div>
            </div>

            <!-- Pantalla de Restablecimiento de Contrase√±a -->
            <div id="reset-password-screen" class="screen">
                <div style="max-width: 450px; margin: 0 auto;">
                    <h2 style="text-align: center; margin-bottom: 30px; color: #2c3e50;">Restablecer Contrase√±a</h2>
                    
                    <!-- Paso 1: Solicitar email -->
                    <div id="reset-step1" style="display: block;">
                        <div class="alert alert-warning">
                            <strong>üîê Recuperaci√≥n de Contrase√±a</strong><br>
                            Ingresa tu email registrado y te enviaremos un c√≥digo de verificaci√≥n.
                        </div>
                        
                        <!-- Mensaje de error para reset -->
                        <div id="reset-error" class="alert alert-danger" style="display: none;">
                            <strong>‚ùå Error</strong><br>
                            <span id="reset-error-message"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="reset-email">Email registrado:</label>
                            <input type="email" id="reset-email" class="form-control" required placeholder="ejemplo@correo.com">
                        </div>
                        
                        <div class="form-group">
                            <button type="button" class="btn btn-primary" onclick="sendResetCode()" style="width: 100%;">üìß Enviar C√≥digo</button>
                        </div>
                    </div>
                    
                    <!-- Paso 2: Verificar c√≥digo -->
                    <div id="reset-step2" style="display: none;">
                        <div class="alert alert-success">
                            <strong>‚úÖ C√≥digo Enviado</strong><br>
                            Hemos enviado un c√≥digo de 6 d√≠gitos a tu email: <span id="email-sent"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="reset-code">C√≥digo de verificaci√≥n:</label>
                            <input type="text" id="reset-code" class="form-control" required placeholder="123456" maxlength="6" style="text-align: center; font-size: 1.5rem; letter-spacing: 0.5rem;">
                        </div>
                        
                        <div class="form-group">
                            <button type="button" class="btn btn-success" onclick="verifyResetCode()" style="width: 100%;">‚úì Verificar C√≥digo</button>
                        </div>
                        
                        <div style="text-align: center; margin-top: 15px;">
                            <a href="#" onclick="sendResetCode()" style="color: #667eea; text-decoration: none; font-size: 0.9rem;">Reenviar c√≥digo</a>
                        </div>
                    </div>
                    
                    <!-- Paso 3: Nueva contrase√±a -->
                    <div id="reset-step3" style="display: none;">
                        <div class="alert alert-success">
                            <strong>üîì C√≥digo Verificado</strong><br>
                            Ahora puedes establecer una nueva contrase√±a.
                        </div>
                        
                        <div class="form-group">
                            <label for="new-password">Nueva contrase√±a:</label>
                            <input type="password" id="new-password" class="form-control" required placeholder="M√≠nimo 6 caracteres">
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-password">Confirmar contrase√±a:</label>
                            <input type="password" id="confirm-password" class="form-control" required placeholder="Repetir contrase√±a">
                        </div>
                        
                        <div class="form-group">
                            <button type="button" class="btn btn-success" onclick="resetPassword()" style="width: 100%;">üîÑ Cambiar Contrase√±a</button>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <a href="#" onclick="showScreen('login')" style="color: #667eea; text-decoration: none;">‚Üê Volver al inicio de sesi√≥n</a>
                    </div>
                </div>
            </div>

            <div id="invoice-list-screen" class="screen">
                <h2 style="color: #2c3e50; margin-bottom: 30px;">Lista de Facturas</h2>
                
                <div style="margin-bottom: 20px;">
                    <input type="text" id="search-invoice" class="form-control" placeholder="üîç Buscar factura..." onkeyup="filterInvoices()" style="max-width: 400px;">
                </div>
                
                <div class="invoice-list" id="invoice-list">
                    <!-- Las facturas se cargar√°n aqu√≠ din√°micamente -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentUser = null;
        let invoices = [];
        let users = [];

        // Variables para reset de contrase√±a
        let resetData = {
            email: null,
            code: null,
            generatedCode: null,
            userId: null
        };

        // Base de datos de usuarios en memoria
        let userDatabase = [];
        
        // Cargar datos del almacenamiento en memoria
        function loadData() {
            if (users.length === 0) {
                // Crear usuario administrador por defecto
                const adminUser = {
                    id: 1,
                    company: 'DESARROLLO DE SOFTWARE SAS',
                    nit: '901234567-8',
                    username: 'admin',
                    email: 'admin@desarrollosoftware.com',
                    password: 'admin123',
                    createdAt: new Date().toISOString(),
                    role: 'admin'
                };
                
                users.push(adminUser);
                userDatabase.push(adminUser);
            }
        }

        // Guardar usuario en la base de datos
        function saveUserToDatabase(user) {
            userDatabase.push(user);
            users.push(user);
            console.log('Usuario guardado en la base de datos:', user.username);
        }

        // Buscar usuario por username
        function findUserByUsername(username) {
            return userDatabase.find(user => user.username === username);
        }

        // Autenticar usuario
        function authenticateUser(username, password) {
            return userDatabase.find(user => 
                user.username === username && user.password === password
            );
        }

        // Guardar datos en memoria
        function saveData() {
            console.log('Datos guardados en memoria');
        }

        // Mostrar pantalla
        function showScreen(screenName) {
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.classList.remove('active'));
            
            const targetScreen = document.getElementById(screenName + '-screen');
            if (targetScreen) {
                targetScreen.classList.add('active');
            }
            
            // Ocultar mensajes al cambiar de pantalla
            if (screenName === 'login') {
                hideLoginError();
            } else if (screenName === 'register') {
                hideRegisterMessages();
            } else if (screenName === 'reset-password') {
                hideResetError();
                document.getElementById('reset-step1').style.display = 'block';
                document.getElementById('reset-step2').style.display = 'none';
                document.getElementById('reset-step3').style.display = 'none';
                document.getElementById('reset-email').value = '';
                document.getElementById('reset-code').value = '';
                document.getElementById('new-password').value = '';
                document.getElementById('confirm-password').value = '';
            }
            
            // Mostrar/ocultar navegaci√≥n
            const navigation = document.getElementById('navigation');
            if (screenName === 'login' || screenName === 'register' || screenName === 'reset-password' || screenName === 'home') {
                navigation.classList.remove('active');
            } else {
                navigation.classList.add('active');
            }
            
            // Actualizar dashboard si es necesario
            if (screenName === 'dashboard') {
                updateDashboard();
            } else if (screenName === 'invoice-list') {
                loadInvoiceList();
            }
        }

        // Funci√≥n para hacer scroll a secciones en la landing page
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }

        // Funci√≥n de login desde la landing page
        function handleHomeLogin() {
            const username = document.getElementById('home-username').value.trim();
            const password = document.getElementById('home-password').value.trim();
            
            if (!username || !password) {
                alert('Por favor completa todos los campos');
                return;
            }
            
            const user = authenticateUser(username, password);
            
            if (user) {
                currentUser = user;
                
                // Limpiar campos
                document.getElementById('home-username').value = '';
                document.getElementById('home-password').value = '';
                
                alert('¬°Bienvenido a ' + user.company + '!');
                showScreen('dashboard');
                generateInvoiceNumber();
            } else {
                alert('Usuario o contrase√±a incorrectos');
                // Limpiar solo la contrase√±a por seguridad
                document.getElementById('home-password').value = '';
                // Enfocar el campo de usuario para facilitar el reintento
                document.getElementById('home-username').focus();
            }
        }

        // Manejar formulario de contacto
        function handleContactForm(event) {
            event.preventDefault();
            
            const name = document.getElementById('contact-name').value.trim();
            const email = document.getElementById('contact-email').value.trim();
            const phone = document.getElementById('contact-phone').value.trim();
            const company = document.getElementById('contact-company').value.trim();
            const message = document.getElementById('contact-message').value.trim();
            
            if (!name || !email || !message) {
                alert('Por favor completa los campos obligatorios (Nombre, Email y Mensaje)');
                return;
            }
            
            // Simular env√≠o de mensaje
            const contactData = {
                id: Date.now(),
                name,
                email,
                phone: phone || 'No proporcionado',
                company: company || 'No especificada',
                message,
                date: new Date().toISOString(),
                status: 'nuevo'
            };
            
            console.log('Mensaje de contacto recibido:', contactData);
            
            // Mostrar confirmaci√≥n
            alert(`¬°Gracias ${name}!\n\nTu mensaje ha sido enviado exitosamente. Nuestro equipo se pondr√° en contacto contigo pronto.\n\nTambi√©n puedes contactarnos directamente:\n‚Ä¢ WhatsApp: +57 300 123 4567\n‚Ä¢ Tel√©fono: +57 300 123 4567`);
            
            // Limpiar formulario
            document.getElementById('contact-name').value = '';
            document.getElementById('contact-email').value = '';
            document.getElementById('contact-phone').value = '';
            document.getElementById('contact-company').value = '';
            document.getElementById('contact-message').value = '';
            
            // Mostrar notificaci√≥n de √©xito
            showNotification('Mensaje enviado exitosamente', 'success');
        }

        // Funciones para mostrar/ocultar mensajes
        function showLoginError() {
            const errorDiv = document.getElementById('login-error');
            errorDiv.style.display = 'block';
            
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function hideLoginError() {
            const errorDiv = document.getElementById('login-error');
            errorDiv.style.display = 'none';
        }

        function showRegisterSuccess() {
            const successDiv = document.getElementById('register-success');
            successDiv.style.display = 'block';
            
            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 10000);
        }

        function showRegisterError(message) {
            const errorDiv = document.getElementById('register-error');
            const messageSpan = document.getElementById('register-error-message');
            messageSpan.textContent = message;
            errorDiv.style.display = 'block';
            
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function hideRegisterMessages() {
            document.getElementById('register-success').style.display = 'none';
            document.getElementById('register-error').style.display = 'none';
        }

        function showResetError(message) {
            const errorDiv = document.getElementById('reset-error');
            const messageSpan = document.getElementById('reset-error-message');
            messageSpan.textContent = message;
            errorDiv.style.display = 'block';
            
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        function hideResetError() {
            document.getElementById('reset-error').style.display = 'none';
        }

        // Funciones de autenticaci√≥n
        function handleLogin() {
            hideLoginError();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (!username || !password) {
                showLoginError();
                return;
            }
            
            const user = authenticateUser(username, password);
            
            if (user) {
                currentUser = user;
                hideLoginError();
                
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
                
                alert('¬°Bienvenido a ' + user.company + '!');
                showScreen('dashboard');
                generateInvoiceNumber();
            } else {
                showLoginError();
                document.getElementById('password').value = '';
                document.getElementById('username').focus();
            }
        }

        function handleRegister() {
            hideRegisterMessages();
            
            const company = document.getElementById('reg-company').value.trim();
            const nit = document.getElementById('reg-nit').value.trim();
            const username = document.getElementById('reg-username').value.trim();
            const email = document.getElementById('reg-email').value.trim();
            const password = document.getElementById('reg-password').value.trim();
            
            if (!company || !nit || !username || !email || !password) {
                showRegisterError('Por favor completa todos los campos');
                return;
            }
            
            if (password.length < 6) {
                showRegisterError('La contrase√±a debe tener al menos 6 caracteres');
                return;
            }
            
            if (findUserByUsername(username)) {
                showRegisterError('El nombre de usuario ya existe. Elige otro.');
                return;
            }
            
            if (userDatabase.find(u => u.email === email)) {
                showRegisterError('El email ya est√° registrado. Usa otro email.');
                return;
            }
            
            const newUser = {
                id: Date.now(),
                company,
                nit,
                username,
                email,
                password,
                createdAt: new Date().toISOString(),
                role: 'user'
            };
            
            saveUserToDatabase(newUser);
            
            showRegisterSuccess();
            
            document.getElementById('reg-company').value = '';
            document.getElementById('reg-nit').value = '';
            document.getElementById('reg-username').value = '';
            document.getElementById('reg-email').value = '';
            document.getElementById('reg-password').value = '';
            
            setTimeout(() => {
                showScreen('login');
                document.getElementById('username').value = newUser.username;
            }, 3000);
        }

        // Funciones de restablecimiento de contrase√±a
        function sendResetCode() {
            hideResetError();
            
            const email = document.getElementById('reset-email').value.trim();
            
            if (!email) {
                showResetError('Por favor ingresa tu email');
                return;
            }
            
            const user = userDatabase.find(u => u.email === email);
            
            if (!user) {
                showResetError('No existe una cuenta registrada con este email');
                return;
            }
            
            const code = Math.floor(100000 + Math.random() * 900000).toString();
            
            resetData = {
                email: email,
                generatedCode: code,
                userId: user.id
            };
            
            console.log('C√≥digo generado para', email, ':', code);
            
            document.getElementById('email-sent').textContent = email;
            
            document.getElementById('reset-step1').style.display = 'none';
            document.getElementById('reset-step2').style.display = 'block';
            
            showNotification(`C√≥digo enviado a ${email}`, 'success');
        }

        function verifyResetCode() {
            hideResetError();
            
            const enteredCode = document.getElementById('reset-code').value.trim();
            
            if (!enteredCode) {
                showResetError('Por favor ingresa el c√≥digo');
                return;
            }
            
            if (enteredCode !== resetData.generatedCode) {
                showResetError('C√≥digo incorrecto. Verifica e intenta nuevamente.');
                document.getElementById('reset-code').value = '';
                return;
            }
            
            document.getElementById('reset-step2').style.display = 'none';
            document.getElementById('reset-step3').style.display = 'block';
            
            showNotification('C√≥digo verificado correctamente', 'success');
        }

        function resetPassword() {
            hideResetError();
            
            const newPassword = document.getElementById('new-password').value.trim();
            const confirmPassword = document.getElementById('confirm-password').value.trim();
            
            if (!newPassword || !confirmPassword) {
                showResetError('Por favor completa ambos campos');
                return;
            }
            
            if (newPassword.length < 6) {
                showResetError('La contrase√±a debe tener al menos 6 caracteres');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showResetError('Las contrase√±as no coinciden');
                return;
            }
            
            const userIndex = userDatabase.findIndex(u => u.id === resetData.userId);
            if (userIndex !== -1) {
                userDatabase[userIndex].password = newPassword;
                
                const usersIndex = users.findIndex(u => u.id === resetData.userId);
                if (usersIndex !== -1) {
                    users[usersIndex].password = newPassword;
                }
                
                resetData = {
                    email: null,
                    code: null,
                    generatedCode: null,
                    userId: null
                };
                
                document.getElementById('reset-email').value = '';
                document.getElementById('reset-code').value = '';
                document.getElementById('new-password').value = '';
                document.getElementById('confirm-password').value = '';
                
                document.getElementById('reset-step1').style.display = 'block';
                document.getElementById('reset-step2').style.display = 'none';
                document.getElementById('reset-step3').style.display = 'none';
                
                showNotification('Contrase√±a cambiada exitosamente', 'success');
                
                alert('¬°Contrase√±a restablecida exitosamente!\n\nYa puedes iniciar sesi√≥n con tu nueva contrase√±a.');
                
                showScreen('login');
            } else {
                showResetError('Error interno. Por favor intenta nuevamente.');
            }
        }

        // Cerrar sesi√≥n
        function logout() {
            currentUser = null;
            showScreen('login');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        // Generar n√∫mero de factura autom√°tico
        function generateInvoiceNumber() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const userInvoices = invoices.filter(inv => inv.userId === currentUser.id).length;
            const invoiceNumber = `${year}${month}${String(userInvoices + 1).padStart(4, '0')}`;
            document.getElementById('invoice-number').value = invoiceNumber;
            document.getElementById('invoice-date').value = today.toISOString().split('T')[0];
        }

        // Agregar producto a la factura
        function addItem() {
            const container = document.getElementById('items-container');
            const newRow = document.createElement('div');
            newRow.className = 'item-row';
            newRow.innerHTML = `
                <input type="text" placeholder="Descripci√≥n" class="form-control item-description" required>
                <input type="number" placeholder="Cantidad" class="form-control item-quantity" min="1" required>
                <input type="number" placeholder="Valor Unitario" class="form-control item-price" step="0.01" required>
                <input type="number" placeholder="Total" class="form-control item-total" readonly>
                <button type="button" class="btn btn-danger" onclick="removeItem(this)">üóëÔ∏è</button>
            `;
            container.appendChild(newRow);
            attachItemListeners(newRow);
        }

        // Remover producto
        function removeItem(button) {
            button.closest('.item-row').remove();
            calculateTotals();
        }

        // Calcular totales
        function calculateTotals() {
            let subtotal = 0;
            const itemRows = document.querySelectorAll('.item-row');
            
            itemRows.forEach(row => {
                const quantity = parseFloat(row.querySelector('.item-quantity').value) || 0;
                const price = parseFloat(row.querySelector('.item-price').value) || 0;
                const total = quantity * price;
                
                row.querySelector('.item-total').value = total.toFixed(2);
                subtotal += total;
            });
            
            const iva = subtotal * 0.19;
            const total = subtotal + iva;
            
            document.getElementById('subtotal').textContent = subtotal.toFixed(2);
            document.getElementById('iva').textContent = iva.toFixed(2);
            document.getElementById('total').textContent = total.toFixed(2);
        }

        // Adjuntar listeners a los campos de productos
        function attachItemListeners(row) {
            const quantityInput = row.querySelector('.item-quantity');
            const priceInput = row.querySelector('.item-price');
            
            quantityInput.addEventListener('input', calculateTotals);
            priceInput.addEventListener('input', calculateTotals);
        }

        // Crear factura
        function createInvoice(event) {
            event.preventDefault();
            
            const invoiceData = {
                id: Date.now(),
                userId: currentUser.id,
                number: document.getElementById('invoice-number').value,
                date: document.getElementById('invoice-date').value,
                clientName: document.getElementById('client-name').value,
                clientNit: document.getElementById('client-nit').value,
                clientAddress: document.getElementById('client-address').value,
                clientEmail: document.getElementById('client-email').value,
                items: [],
                subtotal: parseFloat(document.getElementById('subtotal').textContent),
                iva: parseFloat(document.getElementById('iva').textContent),
                total: parseFloat(document.getElementById('total').textContent),
                status: 'pendiente',
                createdAt: new Date().toISOString()
            };
            
            const itemRows = document.querySelectorAll('.item-row');
            itemRows.forEach(row => {
                const item = {
                    description: row.querySelector('.item-description').value,
                    quantity: parseFloat(row.querySelector('.item-quantity').value),
                    price: parseFloat(row.querySelector('.item-price').value),
                    total: parseFloat(row.querySelector('.item-total').value)
                };
                invoiceData.items.push(item);
            });
            
            invoices.push(invoiceData);
            saveData();
            
            // Simular env√≠o de email al cliente
            sendInvoiceEmailToClient(invoiceData);
            
            alert('Factura creada exitosamente\n\nSe ha enviado una copia de la factura al email: ' + invoiceData.clientEmail);
            clearForm();
            generateInvoiceNumber();
            
            setTimeout(() => {
                simulateDianSubmission(invoiceData.id);
            }, 2000);
        }

        // Limpiar formulario
        function clearForm() {
            document.getElementById('client-name').value = '';
            document.getElementById('client-nit').value = '';
            document.getElementById('client-address').value = '';
            document.getElementById('client-email').value = '';
            
            const container = document.getElementById('items-container');
            const firstRow = container.querySelector('.item-row');
            container.innerHTML = '';
            container.appendChild(firstRow);
            
            firstRow.querySelectorAll('input').forEach(input => {
                if (!input.readOnly) input.value = '';
            });
            
            calculateTotals();
        }

        // Simular env√≠o de email con la factura al cliente
        function sendInvoiceEmailToClient(invoice) {
            const emailContent = `
                ======================================
                üìß FACTURA ELECTR√ìNICA - COPIA CLIENTE
                ======================================
                
                Estimado/a ${invoice.clientName},
                
                Se adjunta la factura electr√≥nica con los siguientes detalles:
                
                üè¢ EMPRESA EMISORA: ${currentUser.company}
                üìÑ FACTURA N¬∞: ${invoice.number}
                üìÖ FECHA: ${new Date(invoice.date).toLocaleDateString('es-CO')}
                
                üë§ CLIENTE: ${invoice.clientName}
                üÜî NIT/CC: ${invoice.clientNit}
                üìç DIRECCI√ìN: ${invoice.clientAddress}
                
                üí∞ DETALLE FINANCIERO:
                ‚Ä¢ Subtotal: ${invoice.subtotal.toLocaleString()}
                ‚Ä¢ IVA (19%): ${invoice.iva.toLocaleString()}
                ‚Ä¢ TOTAL: ${invoice.total.toLocaleString()}
                
                üì¶ PRODUCTOS/SERVICIOS:
                ${invoice.items.map((item, index) => 
                    `${index + 1}. ${item.description} - Cantidad: ${item.quantity} - Valor: ${item.total.toLocaleString()}`
                ).join('\n                ')}
                
                ‚ÑπÔ∏è INFORMACI√ìN ADICIONAL:
                - Esta factura ha sido enviada autom√°ticamente a la DIAN
                - El documento es v√°lido como soporte contable
                - Para cualquier consulta, cont√°ctenos al +57 300 123 4567
                
                Gracias por confiar en nuestros servicios.
                
                ======================================
                ${currentUser.company}
                NIT: ${currentUser.nit}
                Sistema de Facturaci√≥n Electr√≥nica
                ======================================
            `;
            
            console.log(`EMAIL ENVIADO A: ${invoice.clientEmail}`);
            console.log(emailContent);
            
            // Mostrar notificaci√≥n de env√≠o exitoso
            showNotification(`üìß Copia de factura enviada a ${invoice.clientEmail}`, 'success');
            
            // Simular tiempo de env√≠o
            setTimeout(() => {
                showNotification(`‚úÖ Email entregado correctamente a ${invoice.clientName}`, 'success');
            }, 3000);
        }

        // Manejar subida de archivos
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const result = document.getElementById('upload-result');
                result.innerHTML = `
                    <div class="alert alert-success">
                        <strong>Archivo cargado:</strong> ${file.name}<br>
                        <strong>Tama√±o:</strong> ${(file.size / 1024).toFixed(2)} KB<br>
                        <strong>Tipo:</strong> ${file.type || 'Desconocido'}
                    </div>
                `;
            }
        }

        // Procesar archivo subido
        function processUploadedFile() {
            const fileInput = document.getElementById('file-input');
            if (!fileInput.files[0]) {
                alert('Por favor selecciona un archivo primero');
                return;
            }
            
            const result = document.getElementById('upload-result');
            result.innerHTML += `
                <div class="alert alert-warning">
                    <strong>‚è≥ Procesando archivo...</strong><br>
                    Extrayendo datos de la factura...
                </div>
            `;
            
            setTimeout(() => {
                const simulatedInvoice = {
                    id: Date.now(),
                    userId: currentUser.id,
                    number: 'UP' + Date.now().toString().slice(-6),
                    date: new Date().toISOString().split('T')[0],
                    clientName: 'Cliente desde archivo',
                    clientNit: '12345678-9',
                    clientAddress: 'Direcci√≥n extra√≠da del archivo',
                    clientEmail: 'cliente@ejemplo.com',
                    items: [
                        {
                            description: 'Producto desde archivo',
                            quantity: 1,
                            price: 100000,
                            total: 100000
                        }
                    ],
                    subtotal: 100000,
                    iva: 19000,
                    total: 119000,
                    status: 'pendiente',
                    createdAt: new Date().toISOString(),
                    source: 'uploaded'
                };
                
                invoices.push(simulatedInvoice);
                saveData();
                
                // Simular env√≠o de email al cliente
                sendInvoiceEmailToClient(simulatedInvoice);
                
                result.innerHTML += `
                    <div class="alert alert-success">
                        <strong>‚úÖ Archivo procesado exitosamente</strong><br>
                        Factura creada con n√∫mero: ${simulatedInvoice.number}<br>
                        <strong>Total:</strong> ${simulatedInvoice.total.toLocaleString()}<br>
                        üìß Copia enviada a: ${simulatedInvoice.clientEmail}
                    </div>
                `;
                
                setTimeout(() => {
                    simulateDianSubmission(simulatedInvoice.id);
                }, 3000);
                
            }, 2000);
        }

        // Simular env√≠o a DIAN
        function simulateDianSubmission(invoiceId) {
            const invoice = invoices.find(inv => inv.id === invoiceId);
            if (!invoice) return;
            
            const success = Math.random() > 0.2;
            
            if (success) {
                invoice.status = 'enviado';
                invoice.dianCode = 'DIAN' + Date.now().toString().slice(-8);
                invoice.sentAt = new Date().toISOString();
                
                showNotification(`Factura ${invoice.number} enviada exitosamente a la DIAN`, 'success');
            } else {
                invoice.status = 'rechazado';
                invoice.rejectionReason = 'Error en validaci√≥n de datos';
                
                showNotification(`Factura ${invoice.number} rechazada por la DIAN`, 'danger');
            }
            
            saveData();
            updateDashboard();
        }

        // Mostrar notificaci√≥n
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type}`;
            notification.innerHTML = message;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.zIndex = '9999';
            notification.style.maxWidth = '400px';
            notification.style.animation = 'slideInRight 0.5s ease-out';
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Actualizar dashboard
        function updateDashboard() {
            if (!currentUser) return;
            
            const companyHeader = document.getElementById('company-name-header');
            const currentUserName = document.getElementById('current-user-name');
            const currentDate = document.getElementById('current-date');
            
            if (companyHeader) {
                companyHeader.textContent = currentUser.company;
            }
            
            if (currentUserName) {
                currentUserName.textContent = currentUser.username;
            }
            
            if (currentDate) {
                const now = new Date();
                const dateOptions = { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                };
                currentDate.textContent = now.toLocaleDateString('es-CO', dateOptions);
            }
            
            const userInvoices = invoices.filter(inv => inv.userId === currentUser.id);
            const totalFacturas = userInvoices.length;
            const enviadasDian = userInvoices.filter(inv => inv.status === 'enviado').length;
            const pendientes = userInvoices.filter(inv => inv.status === 'pendiente').length;
            const totalFacturado = userInvoices.reduce((sum, inv) => sum + inv.total, 0);
            
            document.getElementById('total-facturas').textContent = totalFacturas;
            document.getElementById('enviadas-dian').textContent = enviadasDian;
            document.getElementById('pendientes').textContent = pendientes;
            document.getElementById('total-facturado').textContent = totalFacturado.toLocaleString();
        }

        // Cargar lista de facturas
        function loadInvoiceList() {
            if (!currentUser) return;
            
            const userInvoices = invoices.filter(inv => inv.userId === currentUser.id);
            const listContainer = document.getElementById('invoice-list');
            
            if (userInvoices.length === 0) {
                listContainer.innerHTML = `
                    <div class="alert alert-warning">
                        <strong>üìã No hay facturas creadas</strong><br>
                        Comienza creando tu primera factura desde el men√∫ principal.
                    </div>
                `;
                return;
            }
            
            listContainer.innerHTML = userInvoices.map(invoice => `
                <div class="invoice-item" data-invoice-id="${invoice.id}">
                    <div>
                        <h4 style="margin: 0; color: #2c3e50;">Factura ${invoice.number}</h4>
                        <p style="margin: 5px 0; color: #666;">
                            <strong>Cliente:</strong> ${invoice.clientName}<br>
                            <strong>Fecha:</strong> ${new Date(invoice.date).toLocaleDateString()}<br>
                            <strong>Total:</strong> ${invoice.total.toLocaleString()}
                        </p>
                        ${invoice.dianCode ? `<p style="margin: 5px 0; color: #28a745;"><strong>C√≥digo DIAN:</strong> ${invoice.dianCode}</p>` : ''}
                        ${invoice.rejectionReason ? `<p style="margin: 5px 0; color: #dc3545;"><strong>Motivo rechazo:</strong> ${invoice.rejectionReason}</p>` : ''}
                    </div>
                    <div style="text-align: right;">
                        <div class="status ${invoice.status}" style="margin-bottom: 10px;">
                            ${invoice.status === 'enviado' ? '‚úÖ Enviado' : 
                              invoice.status === 'rechazado' ? '‚ùå Rechazado' : '‚è≥ Pendiente'}
                        </div>
                        <div>
                            <button class="btn btn-primary" onclick="printInvoice(${invoice.id})" style="margin: 2px;">üñ®Ô∏è Imprimir</button>
                            ${invoice.status === 'pendiente' ? `<button class="btn btn-success" onclick="sendToDian(${invoice.id})" style="margin: 2px;">üì§ Enviar</button>` : ''}
                            ${invoice.status === 'rechazado' ? `<button class="btn btn-warning" onclick="resendToDian(${invoice.id})" style="margin: 2px;">üîÑ Reenviar</button>` : ''}
                            <button class="btn btn-danger" onclick="deleteInvoice(${invoice.id})" style="margin: 2px;">üóëÔ∏è Eliminar</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Filtrar facturas
        function filterInvoices() {
            const searchTerm = document.getElementById('search-invoice').value.toLowerCase();
            const invoiceItems = document.querySelectorAll('.invoice-item');
            
            invoiceItems.forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Imprimir factura
        function printInvoice(invoiceId) {
            const invoice = invoices.find(inv => inv.id === invoiceId);
            if (!invoice) return;
            
            const printWindow = window.open('', '_blank');
            const printContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Factura ${invoice.number}</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }
                        .company-info { margin-bottom: 30px; }
                        .client-info { margin-bottom: 30px; }
                        .items-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
                        .items-table th, .items-table td { border: 1px solid #ddd; padding: 10px; text-align: left; }
                        .items-table th { background-color: #f2f2f2; }
                        .totals { text-align: right; }
                        .footer { margin-top: 50px; text-align: center; font-size: 12px; color: #666; }
                        @media print { body { margin: 0; } }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>FACTURA ELECTR√ìNICA</h1>
                        <h2>${currentUser.company}</h2>
                        <p>NIT: ${currentUser.nit}</p>
                    </div>
                    
                    <div class="company-info">
                        <h3>DATOS DE FACTURACI√ìN</h3>
                        <p><strong>N√∫mero de Factura:</strong> ${invoice.number}</p>
                        <p><strong>Fecha:</strong> ${new Date(invoice.date).toLocaleDateString()}</p>
                        ${invoice.dianCode ? `<p><strong>C√≥digo DIAN:</strong> ${invoice.dianCode}</p>` : ''}
                    </div>
                    
                    <div class="client-info">
                        <h3>FACTURAR A:</h3>
                        <p><strong>Cliente:</strong> ${invoice.clientName}</p>
                        <p><strong>NIT/CC:</strong> ${invoice.clientNit}</p>
                        <p><strong>Direcci√≥n:</strong> ${invoice.clientAddress}</p>
                    </div>
                    
                    <table class="items-table">
                        <thead>
                            <tr>
                                <th>Descripci√≥n</th>
                                <th>Cantidad</th>
                                <th>Valor Unitario</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${invoice.items.map(item => `
                                <tr>
                                    <td>${item.description}</td>
                                    <td>${item.quantity}</td>
                                    <td>${item.price.toLocaleString()}</td>
                                    <td>${item.total.toLocaleString()}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    
                    <div class="totals">
                        <p><strong>Subtotal:</strong> ${invoice.subtotal.toLocaleString()}</p>
                        <p><strong>IVA (19%):</strong> ${invoice.iva.toLocaleString()}</p>
                        <h3><strong>TOTAL:</strong> ${invoice.total.toLocaleString()}</h3>
                    </div>
                    
                    <div class="footer">
                        <p>Factura generada electr√≥nicamente - Sistema FACTURAS</p>
                        <p>DESARROLLO DE SOFTWARE SAS - NIT: 901234567-8</p>
                        <p>Fecha de generaci√≥n: ${new Date().toLocaleString()}</p>
                    </div>
                </body>
                </html>
            `;
            
            printWindow.document.write(printContent);
            printWindow.document.close();
            printWindow.print();
        }

        // Enviar factura individual a DIAN
        function sendToDian(invoiceId) {
            showNotification('Enviando factura a la DIAN...', 'warning');
            setTimeout(() => {
                simulateDianSubmission(invoiceId);
                loadInvoiceList();
            }, 2000);
        }

        // Reenviar factura rechazada
        function resendToDian(invoiceId) {
            const invoice = invoices.find(inv => inv.id === invoiceId);
            if (invoice) {
                invoice.status = 'pendiente';
                invoice.rejectionReason = null;
                saveData();
                sendToDian(invoiceId);
            }
        }

        // Eliminar factura
        function deleteInvoice(invoiceId) {
            if (confirm('¬øEst√°s seguro de que deseas eliminar esta factura?')) {
                const index = invoices.findIndex(inv => inv.id === invoiceId);
                if (index > -1) {
                    invoices.splice(index, 1);
                    saveData();
                    loadInvoiceList();
                    updateDashboard();
                    showNotification('Factura eliminada exitosamente', 'success');
                }
            }
        }

        // Enviar todas las facturas pendientes a DIAN
        function sendAllToDian() {
            if (!currentUser) return;
            
            const pendingInvoices = invoices.filter(inv => 
                inv.userId === currentUser.id && inv.status === 'pendiente'
            );
            
            if (pendingInvoices.length === 0) {
                alert('No hay facturas pendientes para enviar');
                return;
            }
            
            if (confirm(`¬øDeseas enviar ${pendingInvoices.length} factura(s) pendiente(s) a la DIAN?`)) {
                showNotification(`Enviando ${pendingInvoices.length} facturas a la DIAN...`, 'warning');
                
                pendingInvoices.forEach((invoice, index) => {
                    setTimeout(() => {
                        simulateDianSubmission(invoice.id);
                        
                        if (index === pendingInvoices.length - 1) {
                            setTimeout(() => {
                                updateDashboard();
                            }, 1000);
                        }
                    }, (index + 1) * 1000);
                });
            }
        }

        // Probar conexi√≥n con DIAN
        function testDianConnection() {
            showNotification('Probando conexi√≥n con la DIAN...', 'warning');
            
            setTimeout(() => {
                const success = Math.random() > 0.1;
                
                if (success) {
                    showNotification('Conexi√≥n con la DIAN exitosa', 'success');
                } else {
                    showNotification('Error de conexi√≥n con la DIAN. Intenta m√°s tarde.', 'danger');
                }
            }, 2000);
        }

        // Inicializar aplicaci√≥n
        function initApp() {
            loadData();
            
            const existingRows = document.querySelectorAll('.item-row');
            existingRows.forEach(attachItemListeners);
            
            // Agregar efecto ripple a los botones de navegaci√≥n
            addRippleEffect();
            
            // Mostrar pantalla principal en lugar de login
            showScreen('home');
        }

        // Efecto ripple para botones
        function addRippleEffect() {
            const buttons = document.querySelectorAll('.nav-buttons .btn');
            
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.width = ripple.style.height = size + 'px';
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    ripple.classList.add('ripple');
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });
        }

        // Inicializar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>